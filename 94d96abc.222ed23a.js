(window.webpackJsonp=window.webpackJsonp||[]).push([[221],{348:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return s})),a.d(t,"rightToc",(function(){return c})),a.d(t,"default",(function(){return b}));var n=a(1),i=a(9),r=(a(0),a(490)),o={id:"navigation-state",title:"Navigation state reference",sidebar_label:"Navigation state"},s={id:"version-5.x/navigation-state",title:"Navigation state reference",description:"The navigation state is the state where React Navigation stores the navigation structure and history of the app. It's useful to know about the structure of the navigation state if you need to do advanced operations such as [resetting the state](navigation-actions.md#reset), [providing a custom initial state](navigation-container.md#initial-state) etc.",source:"@site/versioned_docs/version-5.x/navigation-state.md",permalink:"/docs/navigation-state",editUrl:"https://github.com/react-navigation/react-navigation.github.io/edit/main/versioned_docs/version-5.x/navigation-state.md",version:"5.x",sidebar_label:"Navigation state",sidebar:"version-5.x/docs",previous:{title:"Navigation events",permalink:"/docs/navigation-events"},next:{title:"Link",permalink:"/docs/link"}},c=[{value:"Partial state objects",id:"partial-state-objects",children:[]}],l={rightToc:c};function b(e){var t=e.components,a=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},l,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"The navigation state is the state where React Navigation stores the navigation structure and history of the app. It's useful to know about the structure of the navigation state if you need to do advanced operations such as ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/navigation-actions#reset"}),"resetting the state"),", ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/navigation-container#initial-state"}),"providing a custom initial state")," etc."),Object(r.b)("p",null,"It's a JavaScript object which looks like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const state = {\n  key: 'stack-1',\n  routeNames: ['Home', 'Profile', 'Settings'],\n  routes: [\n    { key: 'home-1', name: 'Home', params: { sortBy: 'latest' } },\n    { key: 'settings-1', name: 'Settings' },\n  ],\n  index: 1,\n  stale: false,\n};\n")),Object(r.b)("p",null,"There are few properties present in every navigation state object:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"key")," - Unique key to identify the navigator."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"routeName")," - Name of the screens defined in the navigator. This is an unique array containing strings for each screen."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"routes")," - List of route objects (screens) which are rendered in the navigator. It also represents the history in a stack navigator."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"index")," - Index of the focused route object in the ",Object(r.b)("inlineCode",{parentName:"li"},"routes")," array."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"history")," - A list of visited items. This is an optional property and not present in all navigators. For example, it's only present in tab and drawer navigators in the core. The shape of the items in the ",Object(r.b)("inlineCode",{parentName:"li"},"history")," array can vary depending on the navigator."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"stale")," - A navigation state is assumed to be stale unless the ",Object(r.b)("inlineCode",{parentName:"li"},"stale")," property is explicitly set to ",Object(r.b)("inlineCode",{parentName:"li"},"false"),". This means that the state object needs to be ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"#partial-state-objects"}),'"rehydrated"'),".")),Object(r.b)("p",null,"Each route object in a ",Object(r.b)("inlineCode",{parentName:"p"},"routes")," array may contain the following properties:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"key")," - Unique key of the screen. Created automatically or added while navigating to this screen."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"name")," - Name of the screen. Defined in navigator component hierarchy."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"params")," - An optional object containing params which is defined while navigating e.g. ",Object(r.b)("inlineCode",{parentName:"li"},"navigate('Home', { sortBy: 'latest' })"),"."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"state")," - An optional object containing the navigation state of a child navigator nested inside this screen.")),Object(r.b)("p",null,"For example, a stack navigator containing a tab navigator nested inside it's home screen may have a navigation state object like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const state = {\n  key: 'stack-1',\n  routeNames: ['Home', 'Profile', 'Settings'],\n  routes: [\n    {\n      key: 'home-1',\n      name: 'Home',\n      state: {\n        key: 'tab-1',\n        routeNames: ['Feed', 'Library', 'Favorites'],\n        routes: [\n          { key: 'feed-1', name: 'Feed', params: { sortBy: 'latest' } },\n          { key: 'library-1', name: 'Library' },\n          { key: 'favorites-1', name: 'Favorites' },\n        ],\n        index: 0,\n      },\n    },\n    { key: 'settings-1', name: 'Settings' },\n  ],\n  index: 1,\n};\n")),Object(r.b)("p",null,"It's important to note that even if there's a nested navigator, the ",Object(r.b)("inlineCode",{parentName:"p"},"state")," property on the ",Object(r.b)("inlineCode",{parentName:"p"},"route")," object is not added until a navigation happens, hence it's not guaranteed to exist."),Object(r.b)("h2",{id:"partial-state-objects"},"Partial state objects"),Object(r.b)("p",null,"Earlier there was a mention of ",Object(r.b)("inlineCode",{parentName:"p"},"stale")," property in the navigation state. A stale navigation state means that the state object needs to be rehydrated or fixed or fixed up, such as adding missing keys, removing invalid screens etc. before being used. As a user, you don't need to worry about it, React Navigation will fix up any issues in a state object automatically unless ",Object(r.b)("inlineCode",{parentName:"p"},"stale")," is set to ",Object(r.b)("inlineCode",{parentName:"p"},"false"),". If you're writing a ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/custom-routers"}),"custom router"),", the ",Object(r.b)("inlineCode",{parentName:"p"},"getRehydratedState")," method let's you write custom rehydration logic to fix up state objects."),Object(r.b)("p",null,"This feature comes handy when doing operations such as ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/navigation-actions#reset"}),"reset"),", ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/navigation-container#initial-state"}),"providing a initial state")," etc., as you can safely omit many properties from the navigation state object and relying on React Navigation to add those properties for you, making your code simpler. For example, you can only provide a ",Object(r.b)("inlineCode",{parentName:"p"},"routes")," array without any keys and React Navigation will automatically add everything that's needed to make it work:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const state = {\n  routes: [{ name: 'Home' }, { name: 'Profile' }],\n};\n")),Object(r.b)("p",null,"After rehydration, it'll look something like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const state = {\n  key: 'stack-1',\n  routeNames: ['Home', 'Profile', 'Settings'],\n  routes: [\n    { key: 'home-1', name: 'Home' },\n    { key: 'settings-1', name: 'Settings' },\n  ],\n  index: 1,\n  stale: false,\n};\n")),Object(r.b)("p",null,"Here, React Navigation filled in the missing bits such as keys, route names, index etc."),Object(r.b)("p",null,"It's also possible to provide invalid data such as non-existent screens and it'll be fixed automatically. While it's not recommended to write code with invalid state objects, it can be super useful if you do things like ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/state-persistence"}),"state persistence"),", where the configured screens might have changed after an update, which could cause problems if React Navigation didn't fix the state object automatically."),Object(r.b)("p",null,"When you're providing a state object in ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/navigation-container#initial-state"}),Object(r.b)("inlineCode",{parentName:"a"},"initialState")),", React Navigation will always assume that it's a stale state object, which makes sure that things like state persistence work smoothly without extra manipulation of the state object."))}b.isMDXComponent=!0},490:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return m}));var n=a(0),i=a.n(n);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=i.a.createContext({}),b=function(e){var t=i.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s({},t,{},e)),a},p=function(e){var t=b(e.components);return i.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=Object(n.forwardRef)((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,o=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),p=b(a),d=n,m=p["".concat(o,".").concat(d)]||p[d]||u[d]||r;return a?i.a.createElement(m,s({ref:t},l,{components:a})):i.a.createElement(m,s({ref:t},l))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,o=new Array(r);o[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:n,o[1]=s;for(var l=2;l<r;l++)o[l]=a[l];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);