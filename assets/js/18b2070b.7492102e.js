"use strict";(self.webpackChunkreact_navigation_website_next=self.webpackChunkreact_navigation_website_next||[]).push([[81519],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),u=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=u(e.components);return a.createElement(s.Provider,{value:n},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},v=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(t),v=r,m=d["".concat(s,".").concat(v)]||d[v]||p[v]||i;return t?a.createElement(m,o(o({ref:n},c),{},{components:t})):a.createElement(m,o({ref:n},c))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=v;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[d]="string"==typeof e?e:r,o[1]=l;for(var u=2;u<i;u++)o[u]=t[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}v.displayName="MDXCreateElement"},85162:function(e,n,t){t.d(n,{Z:function(){return o}});var a=t(67294),r=t(86010),i={tabItem:"tabItem_Ymn6"};function o(e){var n=e.children,t=e.hidden,o=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(i.tabItem,o),hidden:t},n)}},74866:function(e,n,t){t.d(n,{Z:function(){return N}});var a=t(83117),r=t(67294),i=t(86010),o=t(12466),l=t(16550),s=t(91980),u=t(67392),c=t(50012);function d(e){return function(e){return r.Children.map(e,(function(e){if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')}))}(e).map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}}))}function p(e){var n=e.values,t=e.children;return(0,r.useMemo)((function(){var e=null!=n?n:d(t);return function(e){var n=(0,u.l)(e,(function(e,n){return e.value===n.value}));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,t])}function v(e){var n=e.value;return e.tabValues.some((function(e){return e.value===n}))}function m(e){var n=e.queryString,t=void 0!==n&&n,a=e.groupId,i=(0,l.k6)(),o=function(e){var n=e.queryString,t=void 0!==n&&n,a=e.groupId;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:t,groupId:a});return[(0,s._X)(o),(0,r.useCallback)((function(e){if(o){var n=new URLSearchParams(i.location.search);n.set(o,e),i.replace(Object.assign({},i.location,{search:n.toString()}))}}),[o,i])]}function f(e){var n,t,a,i,o=e.defaultValue,l=e.queryString,s=void 0!==l&&l,u=e.groupId,d=p(e),f=(0,r.useState)((function(){return function(e){var n,t=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!v({value:t,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}var r=null!=(n=a.find((function(e){return e.default})))?n:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:o,tabValues:d})})),h=f[0],b=f[1],g=m({queryString:s,groupId:u}),k=g[0],y=g[1],N=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:u}.groupId),t=(0,c.Nk)(n),a=t[0],i=t[1],[a,(0,r.useCallback)((function(e){n&&i.set(e)}),[n,i])]),w=N[0],C=N[1],E=function(){var e=null!=k?k:w;return v({value:e,tabValues:d})?e:null}();return(0,r.useLayoutEffect)((function(){E&&b(E)}),[E]),{selectedValue:h,selectValue:(0,r.useCallback)((function(e){if(!v({value:e,tabValues:d}))throw new Error("Can't select invalid tab value="+e);b(e),y(e),C(e)}),[y,C,d]),tabValues:d}}var h=t(72389),b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function g(e){var n=e.className,t=e.block,l=e.selectedValue,s=e.selectValue,u=e.tabValues,c=[],d=(0,o.o5)().blockElementScrollPositionUntilNextRender,p=function(e){var n=e.currentTarget,t=c.indexOf(n),a=u[t].value;a!==l&&(d(n),s(a))},v=function(e){var n,t=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":var a,r=c.indexOf(e.currentTarget)+1;t=null!=(a=c[r])?a:c[0];break;case"ArrowLeft":var i,o=c.indexOf(e.currentTarget)-1;t=null!=(i=c[o])?i:c[c.length-1]}null==(n=t)||n.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":t},n)},u.map((function(e){var n=e.value,t=e.label,o=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:l===n?0:-1,"aria-selected":l===n,key:n,ref:function(e){return c.push(e)},onKeyDown:v,onClick:p},o,{className:(0,i.Z)("tabs__item",b.tabItem,null==o?void 0:o.className,{"tabs__item--active":l===n})}),null!=t?t:n)})))}function k(e){var n=e.lazy,t=e.children,a=e.selectedValue;if(t=Array.isArray(t)?t:[t],n){var i=t.find((function(e){return e.props.value===a}));return i?(0,r.cloneElement)(i,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},t.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a})})))}function y(e){var n=f(e);return r.createElement("div",{className:(0,i.Z)("tabs-container",b.tabList)},r.createElement(g,(0,a.Z)({},e,n)),r.createElement(k,(0,a.Z)({},e,n)))}function N(e){var n=(0,h.Z)();return r.createElement(y,(0,a.Z)({key:String(n)},e))}},15149:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return d}});var a=t(83117),r=t(80102),i=(t(67294),t(3905)),o=(t(74866),t(85162),["components"]),l={id:"navigation-events",title:"Navigation events",sidebar_label:"Navigation events"},s=void 0,u={unversionedId:"navigation-events",id:"version-5.x/navigation-events",title:"Navigation events",description:"You can listen to various events emitted by React Navigation to get notified of certain events, and in some cases, override the default action. There are few core events that work for every navigator, as well as navigator specific events that work for only for certain navigators.",source:"@site/versioned_docs/version-5.x/navigation-events.md",sourceDirName:".",slug:"/navigation-events",permalink:"/docs/5.x/navigation-events",draft:!1,editUrl:"https://github.com/react-navigation/react-navigation.github.io/edit/main/versioned_docs/version-5.x/navigation-events.md",tags:[],version:"5.x",frontMatter:{id:"navigation-events",title:"Navigation events",sidebar_label:"Navigation events"},sidebar:"version-5.x/docs",previous:{title:"NavigationContext",permalink:"/docs/5.x/navigation-context"},next:{title:"Navigation state",permalink:"/docs/5.x/navigation-state"}},c={},d=[{value:"<code>navigation.addListener</code>",id:"navigationaddlistener",level:3},{value:"<code>listeners</code> prop on <code>Screen</code>",id:"listeners-prop-on-screen",level:3}],p={toc:d},v="wrapper";function m(e){var n=e.components,t=(0,r.Z)(e,o);return(0,i.kt)(v,(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"You can listen to various events emitted by React Navigation to get notified of certain events, and in some cases, override the default action. There are few core events that work for every navigator, as well as navigator specific events that work for only for certain navigators."),(0,i.kt)("p",null,"Following are the built-in events available with every navigator:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"focus")," - This event is emitted when the screen comes into focus"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"blur")," - This event is emitted when the screen goes out of focus"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"beforeRemove")," (version 5.7+ only) - This event is emitted when the user is leaving the screen, there's a chance to ",(0,i.kt)("a",{parentName:"li",href:"/docs/5.x/preventing-going-back"},"prevent the user from leaving")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"state")," (advanced) - This event is emitted when the navigator's state changes")),(0,i.kt)("p",null,"Apart from these, each navigator can emit their own custom events. For example, stack navigator emits ",(0,i.kt)("inlineCode",{parentName:"p"},"transitionStart")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"transitionEnd")," events, tab navigator emits ",(0,i.kt)("inlineCode",{parentName:"p"},"tabPress")," event etc. You can find details about the events emitted on the individual navigator's documentation."),(0,i.kt)("p",null,"Each callback registered as an event listener receive an event object as its argument. The event object contains few properties:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"data")," - Additional data regarding the event passed by the navigator. This can be ",(0,i.kt)("inlineCode",{parentName:"li"},"undefined")," if no data was passed."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"target")," - The route key for the screen that should receive the event. For some events, this maybe ",(0,i.kt)("inlineCode",{parentName:"li"},"undefined")," if the event wasn't related to a specific screen."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"preventDefault")," - For some events, there may be a ",(0,i.kt)("inlineCode",{parentName:"li"},"preventDefault")," method on the event object. Calling this method will prevent the default action performed by the event (such as switching tabs on ",(0,i.kt)("inlineCode",{parentName:"li"},"tabPress"),"). Support for preventing actions are only available for certain events like ",(0,i.kt)("inlineCode",{parentName:"li"},"tabPress")," and won't work for all events.")),(0,i.kt)("p",null,"There are 2 ways to listen to events:"),(0,i.kt)("h3",{id:"navigationaddlistener"},(0,i.kt)("inlineCode",{parentName:"h3"},"navigation.addListener")),(0,i.kt)("p",null,"Inside a screen, you can add listeners on the ",(0,i.kt)("inlineCode",{parentName:"p"},"navigation")," prop with the ",(0,i.kt)("inlineCode",{parentName:"p"},"addListener")," method. The ",(0,i.kt)("inlineCode",{parentName:"p"},"addListener")," method takes 2 arguments: type of the event, and a callback to be called on the event. It returns a function that can be called to unsubscribe from the event."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const unsubscribe = navigation.addListener('tabPress', e => {\n  // Prevent default action\n  e.preventDefault();\n});\n")),(0,i.kt)("p",null,"Normally, you'd add an event listener in ",(0,i.kt)("inlineCode",{parentName:"p"},"React.useEffect")," for function components. For example:"),(0,i.kt)("samp",{id:"simple-focus-and-blur"}),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"function Profile({ navigation }) {\n  React.useEffect(() => {\n    const unsubscribe = navigation.addListener('focus', () => {\n      // do something\n    });\n\n    return unsubscribe;\n  }, [navigation]);\n\n  return <ProfileContent />;\n}\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"unsubscribe")," function can be returned as the cleanup function in the effect."),(0,i.kt)("p",null,"For class components, you can add the event in the ",(0,i.kt)("inlineCode",{parentName:"p"},"componentDidMount")," lifecycle method and unsubscribe in ",(0,i.kt)("inlineCode",{parentName:"p"},"componentWillUnmount"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"class Profile extends React.Component {\n  componentDidMount() {\n    this._unsubscribe = navigation.addListener('focus', () => {\n      // do something\n    });\n  }\n\n  componentWillUnmount() {\n    this._unsubscribe();\n  }\n\n  render() {\n    // Content of the component\n  }\n}\n")),(0,i.kt)("p",null,"One thing to keep in mind is that you can only listen to events from the immediate navigator with ",(0,i.kt)("inlineCode",{parentName:"p"},"addListener"),". For example, if you try to add a listener in a screen that's inside a stack that's nested in a tab, it won't get the ",(0,i.kt)("inlineCode",{parentName:"p"},"tabPress")," event. If you need to listen to an event from a parent navigator, you may use ",(0,i.kt)("inlineCode",{parentName:"p"},"navigation.getParent()")," to get a reference to parent navigator's navigation prop and add a listener."),(0,i.kt)("h3",{id:"listeners-prop-on-screen"},(0,i.kt)("inlineCode",{parentName:"h3"},"listeners")," prop on ",(0,i.kt)("inlineCode",{parentName:"h3"},"Screen")),(0,i.kt)("p",null,"Sometimes you might want to add a listener from the component where you defined the navigator rather than inside the screen. You can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"listeners")," prop on the ",(0,i.kt)("inlineCode",{parentName:"p"},"Screen")," component to add listeners. The ",(0,i.kt)("inlineCode",{parentName:"p"},"listeners")," prop takes an object with the event names as keys and the listener callbacks as values."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'<Tab.Screen\n  name="Chat"\n  component={Chat}\n  listeners={{\n    tabPress: e => {\n      // Prevent default action\n      e.preventDefault();\n    },\n  }}\n/>\n')),(0,i.kt)("p",null,"You can also pass a callback which returns the object with listeners. It'll receive ",(0,i.kt)("inlineCode",{parentName:"p"},"navigation")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"route")," as the arguments."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"<Tab.Screen\n  name=\"Chat\"\n  component={Chat}\n  listeners={({ navigation, route }) => ({\n    tabPress: e => {\n      // Prevent default action\n      e.preventDefault();\n\n      // Do something with the `navigation` object\n      navigation.navigate('AnotherPlace');\n    },\n  })}\n/>\n")))}m.isMDXComponent=!0}}]);